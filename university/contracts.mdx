---
title: 'Tax Contracts'
description: 'API Route Contracts'
icon: 'school'
---

# Error

Status Code: `4XX | 5XX`

```js
{
    statusCode: 4XX | 5XX,
    message: ErrorMessage
}
```

# Create Game

**Request** `POST /createGame`

```js
{
    gameConfiguration: GameConfigurationOptions
}
```

**Response** `200 OK`

```js
{
    gameID: GameID,
    gameConfiguration: GameConfigurationOptions
}
```

# Join Game

Request that the students make to join in on a game.

**Request** `POST /joinGame`
```js
{
    gameID: GameID
}
```

**Response** `200 OK`

```js
{
    gameID: GameID,
    playerData: PlayerData
}
```

**Web Socket**

If the request was successful, the client will need to make the following websocket request:
```js
{
    action: "game",
    data: {
        type: "joinGame",
        gameID: GameID,
        playerID: PlayerID
    }
}
```

This will then linked the player ID, socket ID and game ID in the connections database.

# Start Game

This will be used by the game host to start a game.

**Web Socket**

The following websocket request will need to be made:

```js
{
    action: "game",
    data: {
        type: "startGame",
        gameID: GameID
    }
}
```

This will then go through the connection table, getting all of the connection ID's for the provided game ID. It will then broadcast a message out to all those clients saying that the game is about to start.

# Start of Round

The timing will be managed by the host.

**Web Socket**

Message sent to all palyers in a game.

The server will process all data from the previous round, if it is the first round, it skips out. Most likely, this will just be an API request to tell a Lambda function to process the data of the previous round. Contact to follow soon...

```js
{
    action: "game",
    data: {
        type: "startRound",
        round: CurrentRoundNumber,
        startTime: StartTime,
        endTime: EndTime
    }
}
```

# End of Round

This request will be sent when a round ends from all clients.

**Web Socket to Client**

```js
{
    action: "game",
    data: {
        type: "endRound",
        round: CurrentRoundNumber
    }
}
```

**Web Socket to Server**

The client will be notified that the round has ended and needs to send the following data back.

```js
{
    action: "game",
    data: {
        type: "roundEnd",
        round: CurrentRoundNumber,
        gameID: GameID,
        playerData: PlayerData
    }
}
```

# Process Round

Restful API route to process the previous round. Will fetch all player data from the ElasticCache, process it and then batch update the DynamoDB for the current 

**Request** `PATCH /process`

```js
{
    gameID: GameID
    round: RoundNumber
}
```

**Response** `200 OK`

```js
{
    gameID: GameID,
    round: RoundNumber,
    message: "Processed all player data."
}
```